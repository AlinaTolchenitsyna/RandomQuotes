{% extends "base.html" %}

{% block title %}–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞{% endblock %}

{% block content %}
  <h1 class="mb-4">–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</h1>

  {% if not quote %}
    <div class="alert alert-warning">
      –ü–æ–∫–∞ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π —Ü–∏—Ç–∞—Ç—ã. <a href="/quotes/add/">–î–æ–±–∞–≤—å –ø–µ—Ä–≤—É—é</a> üôÇ
    </div>
  {% else %}
    <div class="card shadow-sm">
      <div class="card-body">
        <figure>
          <blockquote class="blockquote">
            <p class="mb-0">{{ quote.text }}</p>
          </blockquote>
          <figcaption class="blockquote-footer">
            {{ quote.source.name }}
            <span class="text-muted">({{ quote.source.get_kind_display }})</span>
          </figcaption>
        </figure>

        <div class="d-flex align-items-center gap-3 mt-3">
          <span class="badge text-bg-secondary">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {{ quote.views }}</span>
          <span class="badge text-bg-success">–õ–∞–π–∫–∏: {{ quote.likes }}</span>
          <span class="badge text-bg-danger">–î–∏–∑–ª–∞–π–∫–∏: {{ quote.dislikes }}</span>
        </div>

        <div class="d-flex gap-2 mt-4">
          <form method="post" action="{% url 'like_quote' quote.id %}">
            {% csrf_token %}
            <button 
                class="btn {% if vote_type == 'like' %}btn-success{% else %}btn-outline-success{% endif %}" 
                title="–ù—Ä–∞–≤–∏—Ç—Å—è">
              üëç –õ–∞–π–∫
            </button>
          </form>

          <form method="post" action="{% url 'dislike_quote' quote.id %}">
            {% csrf_token %}
            <button 
                class="btn {% if vote_type == 'dislike' %}btn-danger{% else %}btn-outline-danger{% endif %}" 
                title="–ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è">
              üëé –î–∏–∑–ª–∞–π–∫
            </button>
          </form>


          <a href="/" class="btn btn-primary ms-auto" title="–ü–æ–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥—É—é —Ü–∏—Ç–∞—Ç—É">
            ‚Üª –ï—â—ë —Ü–∏—Ç–∞—Ç—É
          </a>
        </div>

        {% if voted %}
          <p class="text-muted mt-2 mb-0">–í—ã —É–∂–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª–∏ –∑–∞ —ç—Ç—É —Ü–∏—Ç–∞—Ç—É –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏.</p>
        {% endif %}
      </div>
    </div>
  {% endif %}
{% endblock %}
