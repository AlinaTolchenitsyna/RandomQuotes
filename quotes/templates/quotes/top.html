{% extends "base.html" %}
{% block title %}–¢–æ–ø —Ü–∏—Ç–∞—Ç{% endblock %}

{% block content %}
  <h1 class="mb-4">–¢–æ–ø —Ü–∏—Ç–∞—Ç</h1>

  <form method="get" action="{% url 'top_quotes' %}" class="card card-body mb-4">
    <div class="row g-2 align-items-end">
      <div class="col-sm-4">
        <label class="form-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ</label>
        <select name="sort" class="form-select">
          <option value="likes" {% if selected_sort == "likes" %}selected{% endif %}>–õ–∞–π–∫–∏ (–ø–æ —É–±—ã–≤–∞–Ω–∏—é)</option>
          <option value="views" {% if selected_sort == "views" %}selected{% endif %}>–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</option>
          <option value="dislikes" {% if selected_sort == "dislikes" %}selected{% endif %}>–î–∏–∑–ª–∞–π–∫–∏</option>
          <option value="weight" {% if selected_sort == "weight" %}selected{% endif %}>–í–µ—Å</option>
          <option value="recent" {% if selected_sort == "recent" %}selected{% endif %}>–ü–æ –¥–∞—Ç–µ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ)</option>
        </select>
      </div>

      <div class="col-sm-3">
        <label class="form-label">–ü–µ—Ä–∏–æ–¥</label>
        <select name="period" class="form-select">
          <option value="all" {% if selected_period == "all" %}selected{% endif %}>–ó–∞ –≤—Å—ë –≤—Ä–µ–º—è</option>
          <option value="7" {% if selected_period == "7" %}selected{% endif %}>–ó–∞ 7 –¥–Ω–µ–π</option>
          <option value="30" {% if selected_period == "30" %}selected{% endif %}>–ó–∞ 30 –¥–Ω–µ–π</option>
        </select>
      </div>

      <div class="col-sm-3">
        <label class="form-label">–ò—Å—Ç–æ—á–Ω–∏–∫</label>
        <select name="source" class="form-select">
          <option value="">–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
          {% for s in sources %}
            <option value="{{ s.id }}" {% if selected_source|stringformat:"s" == s.id|stringformat:"s" %}selected{% endif %}>{{ s.name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-sm-2">
        <button class="btn btn-primary w-100">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
      </div>
    </div>
  </form>

  {% if top_list %}
    <div class="row g-3">
      {% for q in top_list %}
        <div class="col-12">
          <div class="card shadow-sm">
            <div class="card-body">
              <blockquote class="blockquote mb-2">
                <p class="mb-0">{{ q.text }}</p>
              </blockquote>
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <small class="text-muted">{{ q.source.name }} ‚Ä¢ {{ q.source.get_kind_display }}</small>
                </div>
                <div class="text-end">
                  <span class="badge text-bg-success">üëç {{ q.likes }}</span>
                  <span class="badge text-bg-danger ms-1">üëé {{ q.dislikes }}</span>
                  <span class="badge text-bg-secondary ms-1">üëÅ {{ q.views }}</span>
                  <span class="badge text-bg-info ms-1">‚öñ {{ q.weight }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info">–ù–µ—Ç —Ü–∏—Ç–∞—Ç –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º.</div>
  {% endif %}
{% endblock %}
